# Mosaic Tool - 使用方法と環境構築ガイド

このドキュメントは、仮想環境で動作するモザイクツールのセットアップ方法と使用方法を説明します。

## 目次

1. [必要な環境](#必要な環境)
2. [インストール手順](#インストール手順)
3. [アプリケーションの起動方法](#アプリケーションの起動方法)
4. [アプリケーションの使用方法](#アプリケーションの使用方法)

---

## 必要な環境

-   Python 3.12 以上
-   必要なパッケージは`requirements.txt`にまとめられています。

## インストール手順

### 1. Python 3.12 をインストール

まず、[Python 公式サイト](https://www.python.org/downloads/)から Python 3.12 をインストールしてください。

### 2. 仮想環境を作成

以下のコマンドで仮想環境を作成します。プロジェクトフォルダ内で実行してください。

```bash
python -m venv venv
```

venv という名前の仮想環境が作成されます。

3. 仮想環境を有効化
   Windows の場合：

```bash
venv\Scripts\activate
```

macOS/Linux の場合：

```bash
source venv/bin/activate
```

仮想環境が有効になると、プロンプトに(venv)が表示されます。

4. 必要なパッケージのインストール
   プロジェクトのルートフォルダにある requirements.txt ファイルを使って、必要なパッケージをインストールします。

```bash
pip install -r requirements.txt
```

これで、必要なパッケージ（OpenCV、NumPy、PyAutoGUI、Pillow など）が仮想環境にインストールされます。

アプリケーションの起動方法
仮想環境が有効になっていることを確認してください（プロンプトに(venv)が表示されている）。

mosaic_tool.py を以下のコマンドで実行します。

```bash
python mosaic_tool.py
```

これでアプリケーションが起動し、GUI ウィンドウが表示されます。

### アプリケーションの使用方法

アプリケーションは画像のフォルダを選択し、画像にモザイクをかける機能を提供します。以下は主な操作方法です。

#### 基本的な操作

フォルダを開く
サイドバーの「Open Folder」ボタンをクリックして、モザイク処理を行いたい画像が入っているフォルダを選択します。画像は PNG、JPG、JPEG 形式に対応しています。

#### 画像を切り替える

左右矢印キーで、読み込んだ画像を切り替えることができます。右矢印で次の画像、左矢印で前の画像に移動します。

#### モザイクを適用する

「Apply Mosaic」ボタンをクリックすると、現在選択している領域にモザイク処理が適用されます。モザイクのサイズはサイドバーの「Mosaic Pixel Size」スライダーで調整できます。

#### 保存と次へ進む

「Save & Next」ボタンをクリックすると、モザイク処理が適用された画像が保存され、次の画像に進みます。

#### ブラシサイズの変更

「Brush Size」スライダーで、ブラシサイズを変更できます。画像を描画するときに使用されるブラシの大きさです。

#### 拡大縮小

「Magnification」セクションで、画像の拡大縮小を変更できます。例えば、50%、100%、200%などに設定できます。

#### 元に戻す/やり直す

「Undo」ボタンで前の操作を元に戻し、「Redo」ボタンでやり直しを行うことができます。

#### 画像編集の詳細

マウス操作で描画
画像上で左クリックを押しながらドラッグすることで、モザイクを適用したい範囲を描画できます。描画中にブラシサイズを変更することで、適用されるモザイクの範囲を調整できます。

#### ホバーと描画の同期

マウスを画像上に移動させると、現在のブラシサイズでモザイクが適用される領域がホバリングで表示されます。この領域を確認しながら描画が行えます。

#### キーボードショートカット

Left : 前の画像に移動
Right : 次の画像に移動
o : フォルダを開く
f : モザイクを適用
s : 画像を保存し、次に進む
z : 元に戻す
d : マウス操作を開始（ドラッグ）
[ : ブラシサイズを小さく
] : ブラシサイズを大きく

#### その他の機能

-   モザイクのピクセルサイズ調整
    「Mosaic Pixel Size」スライダーでモザイクのピクセルサイズを調整できます。大きいピクセルサイズで粗いモザイク、小さいピクセルサイズで細かいモザイクが適用されます。

-   画像の保存
    「Save」ボタンをクリックして、現在編集している画像を保存できます。
